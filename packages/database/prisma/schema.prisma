generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String   @id @default(cuid())
  clerkUserId         String   @unique
  email               String?  @unique
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  coverletterThreadId String?
  resumeThreadId      String?
  coverletterThread   Threads? @relation("coverletterThread", fields: [coverletterThreadId], references: [coverletterThreadId])
  resumeThread        Threads? @relation("resumeThread", fields: [resumeThreadId], references: [id], name: "resumeThread")

  @@map("users")
}

model Threads {
  id                  String   @id @default(cuid())
  user_id             String
  user_message        String?
  chat_history        String?
  created_at          DateTime @default(now())
  updated_at          DateTime @updatedAt
  coverletterThreadId String?
  resumeThreadId      String?
  coverletterThread   User?    @relation("coverletterThread", fields: [coverletterThreadId], references: [id])
  resumeThread        User?    @relation("resumeThread", fields: [resumeThreadId], references: [id])
  User                User?    @relation(fields: [userId], references: [id], name: "coverletterThread")
  User                User?    @relation(fields: [userId], references: [id], name: "resumeThread")
  userId              String?

  @@map("threads")
}
